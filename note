<?php
session_start();
?>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Frequency Analyzer</title>
</head>
<body>
    <h3>Word Frequency Analyzer</h3>
    <form method="post">
        Enter a string: <input type="text" name="str" required>
        <input type="submit" name="abtn" value="Analyze Button">
    </form>

<?php
function DisplayResult($arr) {
    echo "<h3>Word Frequency Analyzer Results</h3>";
    foreach ($arr as $key => $value) {
        echo "$key: $value times<br>";
    }

    $max = max($arr);
    $min = min($arr);

    foreach ($arr as $key => $value) {
        if ($value == $max) {
            echo "<h3>The most used word is \"$key\" (used $max times)</h3>";
            break;
        }
    }

    foreach ($arr as $key => $value) {
        if ($value == $min) {
            echo "<h3>The least used word is \"$key\" (used $min times)</h3>";
            break;
        }
    }
}

if (isset($_POST['abtn'])) {
    $words = trim($_POST['str']);
    if (strlen($words) > 0) {
        $words = explode(" ", $words);
        $frequency = array();
        foreach ($words as $word) {
            $word = strtoupper($word);
            if (isset($frequency[$word])) {
                $frequency[$word] += 1;
            } else {
                $frequency[$word] = 1;
            }
        }

        $_SESSION['original'] = $frequency;

        $asc = $frequency;
        ksort($asc);
        $_SESSION["asc"] = $asc;

        $desc = $frequency;
        krsort($desc);
        $_SESSION["dsc"] = $desc;

        arsort($frequency); // sort by value for max/min analysis
        $_SESSION["sorted"] = $frequency;

        DisplayResult($frequency);
    }
}

if (isset($_POST["asbtn"]) && isset($_SESSION["asc"])) {
    DisplayResult($_SESSION["asc"]);
}

if (isset($_POST["dsbtn"]) && isset($_SESSION["dsc"])) {
    DisplayResult($_SESSION["dsc"]);
}
?>

<form method="post">
    <input type="submit" name="asbtn" value="Ascending Order">
    <input type="submit" name="dsbtn" value="Descending Order">
</form>

</body>
</html>
